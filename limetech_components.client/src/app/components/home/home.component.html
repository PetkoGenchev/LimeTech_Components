<div class="filters">
  <h2>Search Components</h2>

  <label>
    Keyword Search:
    <input type="text" [(ngModel)]="filters.keyword" name="keyword" (input)="onFilterChange()" />
  </label>

  <form>
    <label>
      Name:
      <input type="text" [(ngModel)]="filters.name" name="name" (input)="onFilterChange()" />
    </label>
    <label>
      Type:
      <input type="text" [(ngModel)]="filters.typeOfProduct" name="typeOfProduct" (input)="onFilterChange()" />
    </label>
    <label>
      Min Price:
      <input type="number" [(ngModel)]="filters.minPrice" name="minPrice" (input)="onFilterChange()" />
    </label>
    <label>
      Max Price:
      <input type="number" [(ngModel)]="filters.maxPrice" name="maxPrice" (input)="onFilterChange()" />
    </label>
    <label>
      Production Year:
      <input type="number" [(ngModel)]="filters.productionYear" name="productionYear" (input)="onFilterChange()" />
    </label>
    <label>
      Status:
      <select [(ngModel)]="filters.status" name="status" (change)="onFilterChange()">
        <option value="">All</option>
        <option value="Available">Available</option>
        <option value="Sold">Sold</option>
        <option value="WaitingStock">Waiting Stock</option>
      </select>
    </label>
  </form>
</div>

<!-- Show Top Purchased only when there are NO filters -->
<div class="top-purchased" *ngIf="!filtersApplied(); else searchResults">
  <h2>Top 8 Components</h2>
  <div *ngIf="topPurchased && topPurchased.length > 0; else noComponents">
    <ul>
      <li *ngFor="let component of topPurchased">
        <h3>{{ component.name }}</h3>
        <p>Type: {{ component.typeOfProduct }}</p>
        <p>Price: {{ component.price }}</p>
        <button (click)="addToBasket(component.componentId)">Add to Basket</button>
      </li>
    </ul>
  </div>
</div>

<!-- Show Search Results -->
<ng-template #searchResults>
  <h2>Search Results</h2>
  <div *ngIf="components && components.length > 0; else noComponents">
    <ul>
      <li *ngFor="let component of components">
        <h3>{{ component.name }}</h3>
        <p>Type: {{ component.typeOfProduct }}</p>
        <p>Price: {{ component.price }}</p>
        <button (click)="addToBasket(component.componentId)">Add to Basket</button>
      </li>
    </ul>
  </div>
</ng-template>

<ng-template #noComponents>
  <p>No components found.</p>
</ng-template>
